<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Zizhun Guo</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Your awesome title" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<link rel="canonical" href="https://localhost:4000/" />
<meta property="og:url" content="https://localhost:4000/" />
<meta property="og:site_name" content="Your awesome title" />


<script type="application/ld+json">
{"@type":"WebSite","url":"https://localhost:4000/","name":"Your awesome title","headline":"Your awesome title","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<!-- <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css"> -->
<link rel="stylesheet" type="text/css" href="http://localhost:4001/css/bootstrap.css">
<link rel="stylesheet" type="text/css" href="http://localhost:4001/css/app.css">
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://localhost:4000/feed.xml" title="Your awesome title" /></head>
<link href="https://fonts.googleapis.com/css?family=Inconsolata|Noto+Serif+SC&display=swap" rel="stylesheet">

<body style="background: #e3e3d3;">
	<nav id="mainNavbar" class="navbar navbar-dark navbar-expand-md py-0 fixed-top">
    
    <a href="http://localhost:4001/index.html" class="navbar-brand">ZIZHUN GUO</a>
    
    <button class="navbar-toggler" data-toggle="collapse" data-target="#navLinks" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end" id="navLinks">
        <ul class="navbar-nav justify-content-end " >
            <!-- <li class="nav-item text-right">
                <a href="http://localhost:4001/about.html" class="nav-link">&#127925暴风雨</a>
            </li> -->
            <li class="nav-item text-right">
                <a href="http://localhost:4001/assets/Zizhun_Guo_Resume_DS_ML.pdf" class="nav-link">RESUME</a>
            </li>
        </ul>
    </div>
</nav>


	<section id="page-container" class="container-fluid my-5 py-5" style="background: #f6f6f6; width: 100rem;">
	<div class="jumbotron text-center" style="background: #f6f6f6;">
		<h1 class="display-3">Customized SOAP Web Service Development (Java + Apache Derby + Netbeans 9.0)</h1>
		<p class="lead"><span>Author: Zizhun Guo</span>
		</p>
		<p class="lead">		Written at <time datetime="">
			23 Mar 2020
		</time>
		</p>
	</div>		

<div class="jumbotron" style="background: #f6f6f6; padding: 0rem 0rem;">
	<p><p><strong>Stay Strong amid against Covid-19!!!</strong></p>

<center>淡泊明志，宁静致远。</center>

<hr />

<!-- MarkdownTOC -->

<ul>
  <li><a href="#1-tools-and-installation">1. Tools and Installation</a></li>
  <li><a href="#2-project-details">2. Project details</a>
    <ul>
      <li><a href="#21-overall-structure">2.1 Overall structure</a></li>
      <li><a href="#22-db-model-design">2.2 DB model Design</a></li>
      <li><a href="#23-web-services-application">2.3 Web Services Application</a>
        <ul>
          <li><a href="#product-info-class">Product Info Class</a></li>
          <li><a href="#231-operation-getproductinfo">2.3.1 Operation: getProductInfo</a></li>
          <li><a href="#232-operation-placeorder">2.3.2 Operation: placeOrder</a></li>
        </ul>
      </li>
      <li><a href="#24-client-application">2.4 Client application</a></li>
      <li><a href="#25-username-protocol---client-soap-message-handler-for-outbound-messsage-modification">2.5 Username Protocol - Client SOAP message handler for outbound messsage modification</a></li>
      <li><a href="#26-coordination-protocol---server-soap-message-handler-for-inbound-messsage-modification">2.6 Coordination Protocol - Server SOAP message handler for inbound messsage modification</a></li>
    </ul>
  </li>
  <li><a href="#3-results">3. Results</a></li>
  <li><a href="#4-summary-and-post-mortem">4. Summary and Post-mortem</a>
    <ul>
      <li><a href="#41-problem-solving-plan-in-timeline">4.1 Problem Solving Plan in Timeline</a></li>
      <li><a href="#42-debugging">4.2 Debugging</a></li>
    </ul>
  </li>
</ul>

<!-- /MarkdownTOC -->

<h3 id="1-tools-and-installation">1. Tools and Installation</h3>
<p><strong>Tools:</strong></p>
<ul>
  <li>Netbeans IDE 11.2</li>
  <li>Maven 3.1 (plugin version)</li>
  <li>JAVA 1.8</li>
  <li>Glassfish 5.0x (local server)</li>
  <li>Apache DerbyDB</li>
</ul>

<p><strong>Installation:</strong></p>
<ol>
  <li>Load the 2 projects (Server: PurchaseWSApplication; Client: PurchaseClient) using Netbeans IDE.</li>
  <li>Select PurchaseWSApplication(Server) project, and navigate to the Services tab on the left.</li>
  <li>Make sure you have GlassFish Server installed. Make sure you have Database ‘Purchase’ loaded in ‘Java DB’.
*To load the DB:
    <ul>
      <li>Navigate to ‘Service’ tab, and left click the ‘Databases’ legend, in the following legends, right click ‘Java DB’ to open the ‘Properties’.</li>
      <li>Specify the ‘Java DB installation’ location.</li>
      <li>Specify the ‘Database Location’ at where you unzip the ‘Purchase’ folder (Database)
<img src="https://i.imgur.com/l5fYMr6.png" alt="DBinstallation" /></li>
    </ul>
  </li>
  <li>Connect the Purchase DB. Connect jdbc:derby://localhost1527/Purchases [root on ROOT]</li>
  <li>Deploy the project by right-clicking project on ‘RUN’.</li>
  <li>Switch to select PurchaseClient(Client) in the Projects tab.</li>
  <li>Run the program by right-clicking the project on ‘RUN’.</li>
</ol>

<h3 id="2-project-details">2. Project details</h3>
<h4 id="21-overall-structure">2.1 Overall structure</h4>
<p><img src="https://i.imgur.com/NqOKH3H.png" alt="Overall" /></p>

<ol>
  <li>Server side - web service application</li>
  <li>Backend Database</li>
  <li>Client side - java application</li>
  <li>Username protocol - client SOAP message handler</li>
  <li>Coordinator protocol - server SOAP message handler</li>
</ol>

<p>The SOAP message sent from the client-side (outbound) when the client application invokes the web service from the server, would be wrapped by Username Protocol. As the SOAP message gets received by the server-side application, the Coordinator Protocol would decide if the service would be continually processed.</p>
<h4 id="22-db-model-design">2.2 DB model Design</h4>
<p><strong>ER Model</strong></p>

<p><img src="https://i.imgur.com/qY4YT5Q.png" alt="ERModel" /></p>

<p><strong>Initial Views from the DB</strong>
TABLE PRODUCTS:</p>

<p><img src="https://i.imgur.com/n9pa0JJ.png" alt="PRODUCTSviewbefore" /></p>

<p>TABLE ORDERS:</p>

<p><img src="https://i.imgur.com/YRFIcD4.png" alt="ORDERSviewbefore" /></p>

<p>TABLE ACCOUNTS:</p>

<p><img src="https://i.imgur.com/8pKXDxj.png" alt="ACCOUNTSviewbefore" /></p>

<h4 id="23-web-services-application">2.3 Web Services Application</h4>

<p><strong>Brief Introduction</strong>
This is the web service project that holds a web service named Purchase where it has two operations: <strong>getProductInfo</strong> - Query the list of products by providing the keyword of a product name in String, <strong>placeOrder</strong> - Place the order by providing the keywords of a product id, a number of ordering and a account id from the buyer.</p>

<p><strong>WSDL</strong>: http://localhost:8080/PurchaseWSApplication/PurchaseWS?WSDL
(The link only works when the web services is currently deployed)</p>
<h5 id="product-info-class">Product Info Class</h5>
<p>This class works for storing the product information queried from the database.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">productInfo</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">id</span><span class="o">;</span>
    <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="n">String</span> <span class="n">brand</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">year</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">price</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">stock</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setId</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span> <span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setBrand</span><span class="o">(</span><span class="n">String</span> <span class="n">brand</span><span class="o">)</span> <span class="o">{</span> <span class="k">this</span><span class="o">.</span><span class="na">brand</span> <span class="o">=</span> <span class="n">brand</span><span class="o">;}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setYear</span><span class="o">(</span><span class="kt">int</span> <span class="n">year</span><span class="o">)</span> <span class="o">{</span><span class="k">this</span><span class="o">.</span><span class="na">year</span> <span class="o">=</span> <span class="n">year</span><span class="o">;}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPrice</span><span class="o">(</span><span class="kt">int</span> <span class="n">price</span><span class="o">)</span> <span class="o">{</span><span class="k">this</span><span class="o">.</span><span class="na">price</span> <span class="o">=</span> <span class="n">price</span><span class="o">;}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setStock</span><span class="o">(</span><span class="kt">int</span> <span class="n">stock</span><span class="o">)</span> <span class="o">{</span><span class="k">this</span><span class="o">.</span><span class="na">stock</span> <span class="o">=</span> <span class="n">stock</span><span class="o">;}</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getId</span><span class="o">()</span> <span class="o">{</span><span class="k">return</span> <span class="n">id</span><span class="o">;}</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span><span class="k">return</span> <span class="n">name</span><span class="o">;}</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getBrand</span><span class="o">()</span> <span class="o">{</span><span class="k">return</span> <span class="n">brand</span><span class="o">;}</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getYear</span><span class="o">()</span> <span class="o">{</span><span class="k">return</span> <span class="n">year</span><span class="o">;}</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getPrice</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">price</span><span class="o">;}</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getStock</span><span class="o">()</span> <span class="o">{</span><span class="k">return</span> <span class="n">stock</span><span class="o">;}</span>

</code></pre></div></div>

<h5 id="231-operation-getproductinfo">2.3.1 Operation: getProductInfo</h5>
<p>The following Java code shows the implementation of this operation.
The service would intialize a product instance first, then to query info from DerbyDB by using the provided keyword. The service will wind up returning the instance to the server application.</p>
<ul>
  <li><strong>Get the product’s information by providing the product name</strong></li>
</ul>

<pre><code class="language-SQL">SELECT * FROM ROOT.PRODUCTS WHERE PRODUCT_NAME = 'keyword'
</code></pre>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="cm">/**
     * Web service operation
     */</span>
    <span class="nd">@WebMethod</span><span class="o">(</span><span class="n">operationName</span> <span class="o">=</span> <span class="s">"getProductInfo"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">productInfo</span> <span class="nf">getProductInfo</span><span class="o">(</span><span class="nd">@WebParam</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"query"</span><span class="o">)</span> <span class="n">String</span> <span class="n">keyword</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// instance initialization</span>
        <span class="n">productInfo</span> <span class="n">product</span> <span class="o">=</span> <span class="k">new</span> <span class="n">productInfo</span><span class="o">();</span>       
        <span class="k">try</span><span class="o">{</span>   
            <span class="n">Statement</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Main</span><span class="o">.</span><span class="na">getConn</span><span class="o">().</span><span class="na">createStatement</span><span class="o">();</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"WS_getProductInfo(): Connection succeeded !"</span><span class="o">);</span>
            <span class="c1">// execute Query</span>
            <span class="n">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> 
              <span class="n">s</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">(</span><span class="s">"SELECT * FROM ROOT.PRODUCTS WHERE PRODUCT_NAME = \'"</span><span class="o">+</span> <span class="n">keyword</span> <span class="o">+</span> <span class="s">"\'"</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"WS_getProductInfo(): Doing Query"</span><span class="o">);</span>
            <span class="c1">// sets members from results</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">product</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">"PRODUCT_ID"</span><span class="o">));</span>
                <span class="n">product</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"PRODUCT_NAME"</span><span class="o">));</span>
                <span class="n">product</span><span class="o">.</span><span class="na">setBrand</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"BRAND_NAME"</span><span class="o">));</span>
                <span class="n">product</span><span class="o">.</span><span class="na">setYear</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">"MODEL_YEAR"</span><span class="o">));</span>
                <span class="n">product</span><span class="o">.</span><span class="na">setPrice</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">"LIST_PRICE"</span><span class="o">));</span>
                <span class="n">product</span><span class="o">.</span><span class="na">setStock</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">"STOCK"</span><span class="o">));</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">){}</span>
        <span class="k">return</span> <span class="n">product</span><span class="o">;</span>
    <span class="o">}</span>

</code></pre></div></div>

<h5 id="232-operation-placeorder">2.3.2 Operation: placeOrder</h5>
<p>The following Java code shows the implementation of this operation.
The operation conducts 6 queries:</p>
<ul>
  <li><strong>Get the product’s price by providing the product ID</strong>
    <pre><code class="language-SQL">SELECT LIST_PRICE FROM ROOT.PRODUCTS WHERE PRODUCT_ID = product_ID
</code></pre>
  </li>
  <li><strong>Get the stock number of the products by provding the product ID</strong>
    <pre><code class="language-SQL">SELECT STOCK FROM ROOT.PRODUCTS WHERE PRODUCT_ID = product_ID
</code></pre>
  </li>
  <li><strong>Get the account’s credit by providing the customer ID</strong>
    <pre><code class="language-SQL">SELECT ACCOUNT_CREDIT FROM ROOT.ACCOUNTS WHERE CUSTOMER_ID = custmer_ID
</code></pre>
  </li>
  <li><strong>Update the stock value by having it deducted the request number</strong>
    <pre><code class="language-SQL">UPDATE ROOT.PRODUCTS SET STOCK = (number_in_stock- number_product) 
WHERE PRODUCT_ID = product_ID
</code></pre>
  </li>
  <li><strong>Update the credit value by having it deducted the total cost of the order</strong>
    <pre><code class="language-SQL">UPDATE ROOT.ACCOUNTS SET ACCOUNT_CREDIT = (user_credit - price * number_product) 
WHERE CUSTOMER_ID = custmer_ID
</code></pre>
  </li>
  <li><strong>Insert a new record indicating a new transaction</strong>
    <pre><code class="language-SQL">INSERT INTO ROOT.ORDERS VALUES (10, custmer_ID, product_ID, number_product)
</code></pre>
  </li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="cm">/**
     * Web service operation
     */</span>
    <span class="nd">@WebMethod</span><span class="o">(</span><span class="n">operationName</span> <span class="o">=</span> <span class="s">"placeOrder"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getPlaceOrder</span><span class="o">(</span><span class="nd">@WebParam</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"productID"</span><span class="o">)</span> <span class="kt">int</span> <span class="n">product_ID</span><span class="o">,</span> 
                                <span class="nd">@WebParam</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"numberOfProduct"</span><span class="o">)</span> <span class="kt">int</span> <span class="n">number_product</span><span class="o">,</span> 
                                <span class="nd">@WebParam</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"customerID"</span><span class="o">)</span> <span class="kt">int</span> <span class="n">custmer_ID</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">productInfo</span> <span class="n">product</span> <span class="o">=</span> <span class="k">new</span> <span class="n">productInfo</span><span class="o">();</span>
        
        <span class="kt">int</span> <span class="n">price</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">user_credit</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">number_in_stock</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        
        <span class="k">try</span><span class="o">{</span>   
            <span class="n">Statement</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Main</span><span class="o">.</span><span class="na">getConn</span><span class="o">().</span><span class="na">createStatement</span><span class="o">();</span>
            <span class="n">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">(</span><span class="s">"SELECT LIST_PRICE FROM ROOT.PRODUCTS WHERE PRODUCT_ID = "</span><span class="o">+</span> <span class="n">product_ID</span><span class="o">);</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">price</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">"LIST_PRICE"</span><span class="o">);</span>
            <span class="o">}</span>
            
            <span class="n">rs</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">(</span><span class="s">"SELECT STOCK FROM ROOT.PRODUCTS WHERE PRODUCT_ID = "</span><span class="o">+</span> <span class="n">product_ID</span><span class="o">);</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">number_in_stock</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">"STOCK"</span><span class="o">);</span>
            <span class="o">}</span>
            
            <span class="n">rs</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">(</span><span class="s">"SELECT ACCOUNT_CREDIT FROM ROOT.ACCOUNTS WHERE CUSTOMER_ID = "</span><span class="o">+</span> <span class="n">custmer_ID</span><span class="o">);</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">user_credit</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">"ACCOUNT_CREDIT"</span><span class="o">);</span>
            <span class="o">}</span>
                      
        <span class="o">}</span>
        <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">){}</span>
        
        <span class="k">if</span><span class="o">(</span><span class="n">price</span> <span class="o">*</span> <span class="n">number_product</span> <span class="o">&gt;</span> <span class="n">user_credit</span> 
          <span class="o">&amp;&amp;</span> <span class="n">number_in_stock</span> <span class="o">&lt;</span> <span class="n">number_product</span><span class="o">)</span> <span class="k">return</span> <span class="s">"Order placement fails; Insufficient credits!"</span><span class="o">;</span>
        <span class="k">else</span><span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"WS_getPlaceOrder(): Start to place order! "</span><span class="o">);</span>
                <span class="n">Statement</span> <span class="n">s2</span> <span class="o">=</span> <span class="n">Main</span><span class="o">.</span><span class="na">getConn</span><span class="o">().</span><span class="na">createStatement</span><span class="o">();</span>
                
                <span class="c1">// update the stock number</span>
                <span class="n">s2</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">(</span><span class="s">"UPDATE ROOT.PRODUCTS SET STOCK = "</span> 
                  <span class="o">+</span> <span class="o">(</span><span class="n">number_in_stock</span><span class="o">-</span> <span class="n">number_product</span><span class="o">)</span> 
                  <span class="o">+</span> <span class="s">" WHERE PRODUCT_ID = "</span><span class="o">+</span> <span class="n">product_ID</span><span class="o">);</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"WS_getPlaceOrder(): Update stock finished!"</span><span class="o">);</span>
                
                <span class="c1">// deduct the cost                 </span>
                <span class="n">s2</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">(</span><span class="s">"UPDATE ROOT.ACCOUNTS SET ACCOUNT_CREDIT = "</span><span class="o">+</span> <span class="o">(</span><span class="n">user_credit</span> <span class="o">-</span> <span class="n">price</span> <span class="o">*</span> <span class="n">number_product</span><span class="o">)</span> 
                  <span class="o">+</span> <span class="s">"WHERE CUSTOMER_ID = "</span><span class="o">+</span> <span class="n">custmer_ID</span><span class="o">);</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"WS_getPlaceOrder(): Updated credit finished! "</span><span class="o">);</span>
                
                <span class="c1">// insert record in order </span>
                <span class="n">s2</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">(</span><span class="s">"INSERT INTO ROOT.ORDERS VALUES ("</span> <span class="o">+</span> <span class="s">"10"</span> <span class="o">+</span> <span class="s">","</span> 
                  <span class="o">+</span> <span class="n">custmer_ID</span> <span class="o">+</span> <span class="s">","</span> 
                  <span class="o">+</span> <span class="n">product_ID</span> <span class="o">+</span> <span class="s">","</span> 
                  <span class="o">+</span> <span class="n">number_product</span> <span class="o">+</span> <span class="s">")"</span><span class="o">);</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"WS_getPlaceOrder(): Inserted new record to the order table!"</span><span class="o">);</span>
               
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="s">"WS: Successful placed the order!"</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></div></div>

<h4 id="24-client-application">2.4 Client application</h4>

<p><strong>Brief Introduction</strong>
This is the user application that performs two rounds of web service invocation. In the first round, the app would attend to place an order directly. In the second round, the app attends to query the product info first and then use the info to place an order.</p>

<p>The following Java codes show the two-round performances. The user whose ID is 10086 tries to purchase 10 Macbook Pro 15 laptops in one single order. (The laptop’s product ID is 101)</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span> <span class="n">args</span><span class="o">[]){</span>
        <span class="c1">// Round 1</span>
        <span class="n">placeOrder</span><span class="o">(</span><span class="mi">101</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">10086</span><span class="o">);</span>

        <span class="c1">// Round 2</span>
        <span class="n">String</span> <span class="n">keyword</span> <span class="o">=</span> <span class="s">"Macbook Pro 15"</span><span class="o">;</span>
        <span class="n">productInfo</span> <span class="o">=</span> <span class="n">getProduct</span><span class="o">(</span><span class="n">keyword</span><span class="o">);</span>
        <span class="n">placeOrder</span><span class="o">(</span><span class="n">productInfo</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">10086</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>The client application sets up the Purchase Web Service by searching through WSDL file. The method is from last project Web Service project.</p>

<h4 id="25-username-protocol---client-soap-message-handler-for-outbound-messsage-modification">2.5 Username Protocol - Client SOAP message handler for outbound messsage modification</h4>

<p>The following codes show the implementation of adding the header element to a SOAP message through customization in the message handler.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">handleMessage</span><span class="o">(</span><span class="n">SOAPMessageContext</span> <span class="n">messageContext</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Boolean</span> <span class="n">outboundProperty</span> <span class="o">=</span> <span class="o">(</span><span class="n">Boolean</span><span class="o">)</span> <span class="n">messageContext</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">MessageContext</span><span class="o">.</span><span class="na">MESSAGE_OUTBOUND_PROPERTY</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">outboundProperty</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//if the message is outgoing one, i.e., the request to a web service, we add account information into the header</span>
        <span class="n">SOAPMessage</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messageContext</span><span class="o">.</span><span class="na">getMessage</span><span class="o">();</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">SOAPEnvelope</span> <span class="n">envelope</span> <span class="o">=</span> <span class="n">messageContext</span><span class="o">.</span><span class="na">getMessage</span><span class="o">().</span><span class="na">getSOAPPart</span><span class="o">().</span><span class="na">getEnvelope</span><span class="o">();</span>
            <span class="n">SOAPHeader</span> <span class="n">header</span><span class="o">=</span><span class="n">envelope</span><span class="o">.</span><span class="na">getHeader</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">header</span><span class="o">==</span><span class="kc">null</span><span class="o">){</span>
                <span class="n">header</span> <span class="o">=</span> <span class="n">envelope</span><span class="o">.</span><span class="na">addHeader</span><span class="o">();</span>
            <span class="o">}</span>
            <span class="c1">// adding the username element as the child element to the header</span>
            <span class="c1">// when sent out the message to server</span>
            <span class="n">SOAPElement</span> <span class="n">usernameToken</span><span class="o">=</span><span class="n">header</span><span class="o">.</span><span class="na">addChildElement</span><span class="o">(</span><span class="s">"UsernameToken"</span><span class="o">,</span><span class="s">"wsse"</span><span class="o">,</span> <span class="s">"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"</span><span class="o">);</span>
            <span class="n">SOAPElement</span> <span class="n">username</span><span class="o">=</span><span class="n">usernameToken</span><span class="o">.</span><span class="na">addChildElement</span><span class="o">(</span><span class="s">"Username"</span><span class="o">,</span><span class="s">"wsse"</span><span class="o">);</span>
            <span class="n">username</span><span class="o">.</span><span class="na">addTextNode</span><span class="o">(</span><span class="s">"splashurpants"</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span> <span class="c1">//if the message is an incoming one, i.e., the response from the service, then we print out the whole message</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">SOAPMessage</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messageContext</span><span class="o">.</span><span class="na">getMessage</span><span class="o">();</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">ex</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">outboundProperty</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="26-coordination-protocol---server-soap-message-handler-for-inbound-messsage-modification">2.6 Coordination Protocol - Server SOAP message handler for inbound messsage modification</h4>
<p>The following codes show the implementation of extracting the header element in the type of usernameType and invoking operation name from the SOAP message. The codes also enforce the operation invoking orders to a specific user.</p>

<p><strong>How it works?</strong>
The web services application maintains a HashSet that stores the usernames that have once queried the product info (the first round), of which the purpose is hence to enforce the coordination protocol. If a user who has never invoke the getProductInfo service, its username will not be added into the HashSet so that the server will not permit the user to process the placeOrder service by returning the false boolean value in message handling method in message handler and therefore a failed String message will indicate the failure of invocation. However, if a user has ever invoked the service to get product info, the server program will allow its SOAP message to forth process.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">handleMessage</span><span class="o">(</span><span class="n">SOAPMessageContext</span> <span class="n">messageContext</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// get the HashSet</span>
        <span class="n">HashSet</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">table</span> <span class="o">=</span> <span class="n">Main</span><span class="o">.</span><span class="na">getCoordinatorSet</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Server side"</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">outProperty</span> <span class="o">=</span> <span class="n">SOAPMessageContext</span><span class="o">.</span><span class="na">MESSAGE_OUTBOUND_PROPERTY</span><span class="o">;</span>
        <span class="kt">boolean</span> <span class="n">outgoing</span> <span class="o">=</span> <span class="o">(</span><span class="n">Boolean</span><span class="o">)</span><span class="n">messageContext</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">outProperty</span><span class="o">);</span>
        <span class="n">SOAPMessage</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">messageContext</span><span class="o">.</span><span class="na">getMessage</span><span class="o">();</span>
        <span class="n">String</span> <span class="n">username</span><span class="o">=</span><span class="s">""</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">outgoing</span><span class="o">){</span>
                <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>
            <span class="o">}</span> 
            <span class="k">else</span><span class="o">{</span>  

              <span class="c1">// Get username @username</span>
                <span class="n">SOAPHeader</span> <span class="n">header</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="na">getSOAPHeader</span><span class="o">();</span>
                <span class="n">Iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="na">examineAllHeaderElements</span><span class="o">();</span>
                <span class="k">while</span><span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">()){</span>
                    <span class="n">SOAPHeaderElement</span> <span class="n">e</span><span class="o">=(</span><span class="n">SOAPHeaderElement</span><span class="o">)</span> <span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
                    <span class="n">NodeList</span> <span class="n">nl</span><span class="o">=</span><span class="n">e</span><span class="o">.</span><span class="na">getElementsByTagName</span><span class="o">(</span><span class="s">"wsse:Username"</span><span class="o">);</span>
                    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">nl</span><span class="o">.</span><span class="na">getLength</span><span class="o">();</span><span class="n">i</span><span class="o">++){</span>
                        <span class="n">username</span><span class="o">+=</span><span class="n">nl</span><span class="o">.</span><span class="na">item</span><span class="o">(</span><span class="n">i</span><span class="o">).</span><span class="na">getTextContent</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Server: Ongoing username: "</span> <span class="o">+</span> <span class="n">username</span><span class="o">);</span>
                
                <span class="c1">// get the operation name @opNameString</span>
                <span class="n">SOAPEnvelope</span> <span class="n">envelope</span> <span class="o">=</span> <span class="n">messageContext</span><span class="o">.</span><span class="na">getMessage</span><span class="o">().</span><span class="na">getSOAPPart</span><span class="o">().</span><span class="na">getEnvelope</span><span class="o">();</span>   
                <span class="n">SOAPBody</span> <span class="n">body</span> <span class="o">=</span> <span class="n">envelope</span><span class="o">.</span><span class="na">getBody</span><span class="o">();</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">body</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
                    <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Server: No body in message!"</span><span class="o">);</span>
                    <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
                <span class="o">}</span>
                <span class="n">Iterator</span> <span class="n">it2</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="na">getChildElements</span><span class="o">();</span>
                <span class="n">String</span> <span class="n">opNameString</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>
                <span class="k">while</span><span class="o">(</span><span class="n">it2</span><span class="o">.</span><span class="na">hasNext</span><span class="o">()){</span>
                    <span class="n">SOAPBodyElement</span> <span class="n">e</span><span class="o">=(</span><span class="n">SOAPBodyElement</span><span class="o">)</span> <span class="n">it2</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
                    <span class="n">opNameString</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">getLocalName</span><span class="o">();</span>
                    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Server: Ongoing operation name: "</span> <span class="o">+</span> <span class="n">opNameString</span><span class="o">);</span>
                <span class="o">}</span>

                <span class="c1">//</span>
                <span class="c1">// Core Business Logic</span>
                <span class="c1">//</span>
                <span class="c1">// old user</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">table</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">username</span><span class="o">)){</span>
                    <span class="c1">// registered user that had called product info query</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">opNameString</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"getProductInfo"</span><span class="o">)){</span>
                        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Server: Succeeded to query the productInfo"</span><span class="o">);</span>
                    <span class="o">}</span>
                    <span class="c1">// place the order after getting the product info </span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">opNameString</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"placeOrder"</span><span class="o">))</span> <span class="o">{</span>
                        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Server: Succeeded to place the order"</span><span class="o">);</span>
                    <span class="o">}</span>
                    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
                <span class="o">}</span>
                <span class="c1">// new user</span>
                <span class="k">else</span><span class="o">{</span>
                    <span class="c1">// not yet invoke the getProductInfo</span>
                    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Server: Not yet registered"</span><span class="o">);</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">opNameString</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"getProductInfo"</span><span class="o">)){</span>
                        <span class="n">table</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">username</span><span class="o">);</span>
                        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Server: Registration done"</span><span class="o">);</span>
                        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Server: Succeeded to query the productInfo"</span><span class="o">);</span>
                        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
                    <span class="o">}</span> 
                    <span class="c1">// new user attends to directly place the order</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">opNameString</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"placeOrder"</span><span class="o">))</span> <span class="o">{</span>
                        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Server: Failed. Attend to place order without the registeration."</span><span class="o">);</span>
                        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">catch</span><span class="o">(</span><span class="n">SOAPException</span> <span class="n">e</span><span class="o">){</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"SOAP IO Error!!!!"</span><span class="o">);</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>

</code></pre></div></div>

<h3 id="3-results">3. Results</h3>

<p><strong>Server side Output</strong></p>

<p><img src="https://i.imgur.com/lJMlKcL.png" alt="ServerResult" /></p>

<p><strong>Client side Output</strong></p>

<p><img src="https://i.imgur.com/fphuvvd.png" alt="ClientResult" /></p>

<p><strong>Views from DB</strong>
TABLE PRODUCTS:</p>

<p><img src="https://i.imgur.com/dPEuSgC.png" alt="PRODUCTSviewafter" /></p>

<p>TABLE ORDERS:</p>

<p><img src="https://i.imgur.com/wQkKUEn.png" alt="ORDERSviewafter" /></p>

<p>TABLE ACCOUNTS:</p>

<p><img src="https://i.imgur.com/U54BtZY.png" alt="ACCOUNTSviewafter" /></p>

<h3 id="4-summary-and-post-mortem">4. Summary and Post-mortem</h3>
<h4 id="41-problem-solving-plan-in-timeline">4.1 Problem Solving Plan in Timeline</h4>
<p>Split the goal into individual tasks in timeline:</p>
<ol>
  <li>Database prepration:
    <ul>
      <li>Created the ER model and implemented into tables</li>
      <li>Assigned the initial records for query testing</li>
      <li>(Tricky thing) Use MySQL benchmark for fast table and SQL statements test and migrate to DerbyDB</li>
    </ul>
  </li>
  <li>Linked the DB to web service program
    <ul>
      <li>Performed queries towards the task requirement in Main method</li>
      <li>Performed queries in operations</li>
    </ul>
  </li>
  <li>Created the client programe that consumes the web service
    <ul>
      <li>Performed queries by invoking the operations in web service</li>
    </ul>
  </li>
  <li>Message Handler preparation
    <ul>
      <li>Printed out the SOAP message from client for java SOAP class testing</li>
      <li>Added the username to the header element in outbound SOAP message from Client side</li>
      <li>Extracted the username and operation name from the inbound SOAP message from Server side</li>
    </ul>
  </li>
</ol>

<h4 id="42-debugging">4.2 Debugging</h4>

<ul>
  <li>annotation @override: it should be placed above the message handle method’s signature so that to make it works.</li>
  <li>After configure the protocol to the web service, the generated XML file should be placed in the same directory of the .class file in target folder instead of the place where it was first generated in src folder.</li>
  <li>When do query, the the Value in Where clause condition should be wrapped by a pair of ‘ sign.</li>
</ul>

<p><strong>useful resources and references</strong></p>

<p>Oracle message handling:</p>

<p>https://docs.oracle.com/cd/E13222_01/wls/docs103/webserv_adv/handlers.html</p>

<p>Noctrl.edu Message handling</p>

<p>http://gcmuganda.faculty.noctrl.edu/classes/Spring12/615/SOAPHeaderExample.txt</p>

<p>Message handling example:</p>

<p>https://www.itread01.com/p/847210.html
https://www.codota.com/code/java/classes/javax.xml.soap.SOAPHeaderElement
https://www.codota.com/code/java/methods/javax.xml.soap.SOAPElement/addChildElement
https://www.codota.com/code/java/methods/javax.xml.soap.SOAPHeader/addChildElement
https://www.programcreek.com/java-api-examples/?class=javax.xml.soap.SOAPEnvelope&amp;method=getHeader</p>

<p>UsernameType XML schema:</p>

<p>https://www.w3.org/2003/05/soap-envelope/</p>

<p>Link JavaDB:</p>

<p>https://www.youtube.com/watch?v=NDT9ByL7jA0</p>

<p>Processing SQL Statements with JDBC:</p>

<p>https://docs.oracle.com/javase/tutorial/jdbc/basics/processingsqlstatements.html</p>

<p>JavaDB SQL Official handbook:</p>

<p>https://db.apache.org/derby/docs/10.8/ref/</p>

<p>Microservices Consistence Maintance:</p>

<p>https://www.itzhai.com/trade-transaction-of-data-consistency.html</p>

<p>https://www.cnblogs.com/study-everyday/p/7605619.html</p>

<p>Derby development:</p>

<p>https://www.ibm.com/developerworks/cn/opensource/os-ad-trifecta7/index.html</p>

<p>Glassfish not seeing my handler-chain.xml:</p>

<p>https://stackoverflow.com/questions/14539296/glassfish-not-seeing-my-handler-chain-xml</p>

<hr />
<p><strong>Zizhun Guo@All rights reserved</strong></p>
</p>

</div>


</section>
	
	<a href="#page-container" style="position:fixed;right:0;bottom:0">Back to Top</a>

	<!-- Optional JavaScript -->
	<!-- jQuery first, then Popper.js, then Bootstrap JS -->
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
	crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
	crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
	crossorigin="anonymous"></script>

	<script>
		$(function () {
			$(document).scroll(function () {
				var $nav = $("#mainNavbar");
				$nav.toggleClass("scrolled", $(this).scrollTop() > $nav.height());
			});
		});
	</script>
</body>
</html>